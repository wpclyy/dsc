<?php
//zend by QQ:2172298892  瑾梦网络  禁止倒卖 一经发现停止任何服务
echo "<!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd\">\r\n<html xmlns=\"http://www.w3.org/1999/xhtml\">\r\n<head>\r\n<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\" />\r\n<title>";
echo $lang['setting_title'];
echo "</title>\r\n<link href=\"styles/install.css\" rel=\"stylesheet\" type=\"text/css\" />\r\n<script type=\"text/javascript\" src=\"js/transport.js\"></script>\r\n<script type=\"text/javascript\" src=\"js/common.js\"></script>\r\n<script type=\"text/javascript\" src=\"js/draggable.js\"></script>\r\n<script type=\"text/javascript\" src=\"js/setting.js\"></script>\r\n<script type=\"text/javascript\">\r\nvar \$_LANG = {};\r\n";

foreach ($lang['js_languages'] as $key => $item) {
	echo '$_LANG["';
	echo $key;
	echo '"] = "';
	echo $item;
	echo "\";\r\n";
}

echo "</script>\r\n</head>\r\n<body id=\"checking\">\r\n";
include ROOT_PATH . 'install/templates/header.php';
echo "    <div class=\"wrapper\">\r\n    \t<div class=\"w1000\">\r\n        \t<div class=\"attention\" id=\"attention\">\r\n            \t\r\n            </div>\r\n            <div class=\"content\">\r\n            \t<div class=\"tab\">\r\n                \t<div class=\"step\">\r\n                    \t<div class=\"warp\">\r\n                        \t<i>1</i>\r\n                        \t<span>欢迎使用</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"step\">\r\n                    \t<div class=\"warp\">\r\n                        \t<i>2</i>\r\n                        \t<span>检查环境</span>\r\n                        </div>\r\n                    </div>\r\n                    <div class=\"step curr\">\r\n                    \t<div class=\"warp\">\r\n                        \t<i>3</i>\r\n                        \t<span>配置系统</span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div class=\"zoome\" id=\"zoome\">\r\n                \r\n                </div>\r\n                <div class=\"right\" id=\"right_ad\">\r\n                \t\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class=\"footer\">\r\n     \t\t";
include ROOT_PATH . 'install/templates/copyright.php';
echo "</div>\r\n\t\t</div>\r\n    </div>\r\n<div class=\"loading\" id=\"js-monitor\" style=\"display:none;\">\r\n            <div class=\"loading-mask\"></div>\r\n            <div class=\"loading-content\" id=\"loading-content\">\r\n                <div class=\"loading-top\">\r\n                    <div class=\"tit\" id=\"js-monitor-title\">安装程序监测器</div>\r\n                    <div class=\"close\" id=\"js-monitor-close\"></div>\r\n                </div>\r\n                <div class=\"loading-warp\">\r\n                    <div class=\"img\"><img id=\"js-monitor-loading\" src=\"images/load.gif\" /></div>\r\n                    <div class=\"desc\" id=\"js-monitor-wait-please\"></div>\r\n                    <div class=\"desc\" id=\"js-notice\">快速正在安装中，请稍后......</div>\r\n                </div>\r\n                <div class=\"loading-bottom\"></div>\r\n            </div>\r\n        \r\n    \t</div>\r\n<script type=\"text/javascript\">\r\nfunction check_mobile_code()\r\n{\r\n\tvar f = \$(\"js-setting\");\r\n\tvar mobile=f[\"mobile\"].value;\r\n\tvar mobile_code=f[\"mobile_code\"].value;\r\n\t/*if(mobile.length==0)\r\n\t{\r\n\t\talert(\$_LANG['emptymobile']);\r\n\t\treturn false;\t\r\n\t}\r\n\telse if(mobile_code.length==0)\r\n\t{\r\n\t\talert(\$_LANG['emptymobile_code']);\r\n\t\treturn false;\r\n\t}\r\n\telse\r\n\t{\r\n\t\tAjax.call('cloud.php?step=check_code','mobile='+mobile+'&mobile_code='+mobile_code,function check_code(data){\r\n\t\t\t\tif(data.error){\r\n\t\t\t\t\talert(data.content);\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\tinstall();\r\n\t\t\t\t}\r\n\t\t\t}, 'POST', 'JSON','FLASE');\r\n\t}*/\r\n\tinstall();\r\n}\r\nAjax.call('cloud.php?step=setting_ui','', setting_ui_api, 'GET', 'TEXT','FLASE');\r\nAjax.call('cloud.php?step=right_ad','', right_ad_api, 'GET', 'TEXT','FLASE');\r\nAjax.call('cloud.php?step=update_mend','', update_mend_api, 'GET', 'TEXT','FLASE');\r\nfunction right_ad_api(result)\r\n{\r\n  if(result)\r\n  {\r\n    setInnerHTML('right_ad',result);\r\n  }\r\n}\r\nfunction update_mend_api(result)\r\n{\r\n  if(result)\r\n  {\r\n    setInnerHTML('attention',result);\r\n  }\r\n}\r\nfunction setting_ui_api(result)\r\n{\r\n  if(result)\r\n  {\r\n    setInnerHTML('zoome',result);\r\n    setInputCheckedStatus();\r\n    var f = \$(\"js-setting\");\r\n\r\n    //f.setAttribute(\"action\", \"javascript:check_mobile_code();void 0;\");\r\n\t\r\n\tf.setAttribute(\"action\", \"javascript:install();\");\r\n\r\n    f[\"js-db-name\"].onblur = function () {\r\n        var list = getDbList();\r\n        for (var i = 0; i < list.length; i++) {\r\n            if (f[\"js-db-name\"].value === list[i]) {\r\n                var answer = confirm(\$_LANG[\"db_exists\"]);\r\n                if (answer === false) {\r\n                    f[\"js-db-name\"].value = \"\";\r\n                }\r\n            }\r\n        }\r\n    }\r\n    f[\"js-admin-password\"].onblur = function  () {\r\n            var password = f['js-admin-password'].value;\r\n            var confirm_password = f['js-admin-password2'].value;\r\n            if (!(password.length >= 8 && /\\d+/.test(password) && /[a-zA-Z]+/.test(password)))\r\n            {\r\n                \$(\"js-install-at-once\").setAttribute(\"disabled\", \"true\");\r\n                if (!(password.length >= 8)){\r\n                    \$(\"js-admin-password-result\").innerHTML=\"<span class='comment'><img src='images\\/no.gif'>\"+\$_LANG[\"password_short\"]+\"<\\/span>\";\r\n                }\r\n                else\r\n                {\r\n                    \$(\"js-admin-password-result\").innerHTML=\"<span class='comment'><img src='images\\/no.gif'>\"+\$_LANG[\"password_invaild\"]+\"<\\/span>\";\r\n                }\r\n            }\r\n            else\r\n            {\r\n                \$(\"js-admin-password-result\").innerHTML=\"<img src='images\\/yes.gif'>\";\r\n                if (password==confirm_password)\r\n                {\r\n                    \$(\"js-install-at-once\").removeAttribute(\"disabled\");\r\n                    \$(\"js-admin-confirmpassword-result\").innerHTML=\"<img src='images\\/yes.gif'>\";\r\n                }\r\n                else\r\n                {\r\n                    \$(\"js-install-at-once\").setAttribute(\"disabled\", \"true\");\r\n                    if (confirm_password!='')\r\n                    {\r\n                    \$(\"js-admin-confirmpassword-result\").innerHTML=\"<span class='comment'><img src='images\\/no.gif'>\"+\$_LANG[\"password_not_eq\"]+\"<\\/span>\";\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    f[\"js-admin-password2\"].onblur = function  () {\r\n        var password = f['js-admin-password'].value;\r\n        var confirm_password = f['js-admin-password2'].value;\r\n        if (!(confirm_password.length >= 8 && /\\d+/.test(confirm_password) && /[a-zA-Z]+/.test(confirm_password) && password==confirm_password))\r\n        {\r\n          \$(\"js-install-at-once\").setAttribute(\"disabled\", \"true\");\r\n            \r\n          if (!(confirm_password.length >= 8)){\r\n                    \$(\"js-admin-confirmpassword-result\").innerHTML=\"<span class='comment'><img src='images\\/no.gif'>\"+\$_LANG[\"password_short\"]+\"<\\/span>\";\r\n          }\r\n          else\r\n          {\r\n                    if (password==confirm_password){\r\n                        \$(\"js-admin-confirmpassword-result\").innerHTML=\"<span class='comment'><img src='images\\/no.gif'>\"+\$_LANG[\"password_invaild\"]+\"<\\/span>\";\r\n                    }\r\n                    else\r\n                    {\r\n                        \$(\"js-admin-confirmpassword-result\").innerHTML=\"<span class='comment'><img src='images\\/no.gif'>\"+\$_LANG[\"password_not_eq\"]+\"<\\/span>\";\r\n                    }\r\n          }\r\n        }\r\n        else\r\n        {\r\n            \$(\"js-install-at-once\").removeAttribute(\"disabled\");\r\n            \$(\"js-admin-confirmpassword-result\").innerHTML=\"<img src='images\\/yes.gif'>\";\r\n        }\r\n    }\r\n    f[\"js-admin-password\"].onkeyup = function () {\r\n      var pwd = f['js-admin-password'].value;\r\n      var Mcolor = \"#FFF\",Lcolor = \"#FFF\",Hcolor = \"#FFF\";\r\n\t  var Safety='pwd-strength';\r\n      var m=0;\r\n\r\n      var Modes = 0;\r\n      for (i=0; i<pwd.length; i++)\r\n      {\r\n        var charType = 0;\r\n        var t = pwd.charCodeAt(i);\r\n        if (t>=48 && t <=57)\r\n        {\r\n          charType = 1;\r\n        }\r\n        else if (t>=65 && t <=90)\r\n        {\r\n          charType = 2;\r\n        }\r\n        else if (t>=97 && t <=122)\r\n\t\t{\r\n\t\t\tcharType = 4;\t\r\n\t\t}\r\n        else\r\n\t\t{\r\n\t\t\tcharType = 4;\t\r\n\t\t}\r\n        Modes |= charType;\r\n      }\r\n\r\n      for (h=0;h<4;h++)\r\n      {\r\n        if (Modes & 1) m++;\r\n          Modes>>>=1;\r\n      }\r\n\r\n      if (pwd.length<=4)\r\n      {\r\n        m = 1;\r\n      }\r\n\r\n      switch(m)\r\n      {\r\n        case 1 :\r\n          Safety = \"pwd-strength weak\";\r\n        break;\r\n        case 2 :\r\n          Safety = \"pwd-strength middle\";\r\n        break;\r\n        case 3 :\r\n          Safety = \"pwd-strength strong\";\r\n        break;\r\n        case 4 :\r\n          Safety = \"pwd-strength strong\";\r\n        break;\r\n        default :\r\n        break;\r\n      }\r\n      if(document.getElementById(\"Safety_style\"))\r\n      {\r\n         document.getElementById(\"Safety_style\").className  = Safety;\r\n      }\r\n\r\n\r\n    }\r\n    f[\"js-db-list\"].onfocus = displayDbList;\r\n\r\n    \$(\"js-monitor-close\").onclick = function () {\r\n        \$(\"js-monitor\").style.display = \"none\";\r\n        unlockSpecInputs();\r\n    };\r\n\t\r\n\t //\$(\"send_mobile_code\").onclick = function () {\r\n//        \tvar mobile=f[\"mobile\"].value;\r\n//\t\t\tvar mobile_code=f[\"mobile_code\"].value;\r\n//\t\t\tif(mobile.length==0)\r\n//\t\t\t{\r\n//\t\t\t\talert(\$_LANG['emptymobile']);\r\n//\t\t\t\treturn false;\r\n//\t\t\t}\r\n//\t\t\telse\r\n//\t\t\t{\r\n//\t\t\t\tvar reg = /^0?1[3|4|5|8][0-9]\\d{8}\$/;\r\n//\t\t\t\tif(!reg.test(mobile))\r\n//\t\t\t\t{\r\n//\t\t\t\t\talert(\$_LANG['mobile_error']);\r\n//\t\t\t\t\treturn false;\r\n//\t\t\t\t}\r\n//\t\t\t\telse\r\n//\t\t\t\t{\r\n//\t\t\t\t\tAjax.call('cloud.php?step=send_code','mobile='+mobile,function check_code(data){\r\n//\t\t\t\t\t\tif(!data.error){\r\n//\t\t\t\t\t\t\talert(data.content);\r\n//\t\t\t\t\t\t}\r\n//\t\t\t\t\t\telse\r\n//\t\t\t\t\t\t{\r\n//\t\t\t\t\t\t\talert(data.content);\r\n//\t\t\t\t\t\t\treturn false;\r\n//\t\t\t\t\t\t}\r\n//\t\t\t\t\t}, 'POST', 'JSON','TRUE');\r\n//\t\t\t\t\t\$(\"send_mobile_code\").disabled=true;\r\n//\t\t\t\t\tvar i=60;\r\n//\t\t\t\t\tvar initime=window.setInterval(function () {\r\n//\t\t\t\t\t\tvar msgval=\"(\"+i+\")秒\";\r\n//\t\t\t\t\t\tif(i==0)\r\n//\t\t\t\t\t\t{\r\n//\t\t\t\t\t\t\t\$(\"send_mobile_code\").value=\"发送验证码\";\t\r\n//\t\t\t\t\t\t\t\$(\"send_mobile_code\").disabled=false;\r\n//\t\t\t\t\t\t\twindow.clearInterval(initime);\r\n//\t\t\t\t\t\t}\r\n//\t\t\t\t\t\telse\r\n//\t\t\t\t\t\t{\r\n//\t\t\t\t\t\t\t\$(\"send_mobile_code\").value=msgval;\t\r\n//\t\t\t\t\t\t}\r\n//\t\t\t\t\t\ti-=1;\r\n//\r\n//\t\t\t\t\t}, 1000);\r\n//\t\t\t\t}\r\n//\t\t\t\t\r\n//\t\t\t}\r\n//\t};\r\n\r\n   // var detail = \$(\"js-monitor-view-detail\")\r\n//    detail.innerHTML = \$_LANG[\"display_detail\"];\r\n//    detail.onclick = function () {\r\n//        var mn = \$(\"js-monitor-notice\");\r\n//        if (mn.style.display === \"block\") {\r\n//            mn.style.display = \"none\"\r\n//            this.innerHTML = \$_LANG[\"display_detail\"];\r\n//        } else {\r\n//            mn.style.display = \"block\"\r\n//            this.innerHTML = \$_LANG[\"hide_detail\"];\r\n//        }\r\n//    };\r\n//alert(1);\r\n    //iframe = frames['js-monitor-notice'];\r\n    notice = \$(\"js-notice\");\r\n    var d = new Draggable();\r\n    d.bindDragNode(\"js-monitor\", \"js-monitor-title\");\r\n\r\n    \$(\"js-system-lang-\" + getAddressLang()).setAttribute(\"checked\", \"checked\");\r\n\r\n    \$(\"js-pre-step\").onclick = function () {\r\n        location.href = \"./index.php?lang=\" + getAddressLang() + \"&step=check\";\r\n    };\r\n\r\n    f[\"js-install-demo\"].onclick = switchInputsStatus;\r\n\t\r\n\t\tvar winHeight =window.innerHeight;\r\n\t\tvar winWidth =window.innerWidth;\r\n\t\tvar top = (winHeight-310)/2 +'px';\r\n\t\tvar left =(winWidth-520)/2 +'px';\r\n\t\t\r\n\t\tvar loading=\$(\"loading-content\");\r\n\t\t\r\n\t\tloading.style.top=top;\r\n\t\tloading.style.left=left;\r\n\r\n  }\r\n}\r\n</script>\r\n</body>\r\n</html>\r\n";

?>
